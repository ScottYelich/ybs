# Step 0: Build Configuration

**Step ID**: 000000000000
**System**: hello-world
**Version**: 1.0.0
**Estimated Time**: 2 minutes

---

## Context

**What**: Collect all build configuration questions upfront and save to BUILD_CONFIG.json

**Why**: This enables autonomous execution of Steps 1-4 without user prompts. It also enables zero-interaction rebuilds (subsequent builds read the config file instead of asking questions).

**Step 0 is special**: This is the only step that prompts the user. All subsequent steps read from BUILD_CONFIG.json.

---

## Prerequisites

- None (this is always the first step)

---

## Instructions

### 1. Check for Existing Configuration

**IMPORTANT**: Before asking questions, check if BUILD_CONFIG.json already exists:

```bash
# Check current directory for BUILD_CONFIG.json
if [ -f BUILD_CONFIG.json ]; then
  echo "✅ BUILD_CONFIG.json found - skipping questions"
  cat BUILD_CONFIG.json
  exit 0
fi
```

**If BUILD_CONFIG.json exists**:
- Read it
- Display the configuration
- Skip all questions below
- Mark this step complete
- Proceed to Step 1

**If BUILD_CONFIG.json does NOT exist**:
- Continue with questions below

---

### 2. Scan for CONFIG Markers

Read all step files in the steps/ directory and identify CONFIG markers:
- `{{CONFIG:build_name}}` - Build name
- `{{CONFIG:language}}` - Programming language
- `{{CONFIG:platform}}` - Target platform
- `{{CONFIG:script_name}}` - Script filename
- `{{CONFIG:message}}` - Message to print

---

### 3. Ask Configuration Questions

Prompt the user for each configuration item:

**Q1: Build Name**
```
Question: What should we name this build?
Type: text
Default: demo
Validation: Alphanumeric, hyphens, underscores only ([a-zA-Z0-9_-]+)
CONFIG: build_name
```

**Q2: Programming Language**
```
Question: Which programming language?
Type: choice
Options:
  - python (Python 3.6+)
  - bash (Bash 4+)
  - ruby (Ruby 2.5+)
  - javascript (Node.js 12+)
Default: python
CONFIG: language
```

**Q3: Target Platform**
```
Question: Target platform?
Type: choice
Options:
  - linux (Linux)
  - macos (macOS)
  - windows (Windows)
  - all (All platforms)
Default: all
CONFIG: platform
```

**Q4: Script Name**
```
Question: Script filename (without extension)?
Type: text
Default: hello
Validation: Valid filename characters ([a-zA-Z0-9_-]+)
CONFIG: script_name
```

**Q5: Message Text**
```
Question: Message to print?
Type: text
Default: Hello, World!
CONFIG: message
```

---

### 4. Create BUILD_CONFIG.json

Save the collected configuration to BUILD_CONFIG.json in the current directory:

```json
{
  "system": "hello-world",
  "version": "1.0.0",
  "build_name": "{{CONFIG:build_name}}",
  "language": "{{CONFIG:language}}",
  "platform": "{{CONFIG:platform}}",
  "script_name": "{{CONFIG:script_name}}",
  "message": "{{CONFIG:message}}",
  "created_at": "2026-01-18T18:30:00Z",
  "ybs_version": "2.0.0"
}
```

**Important**: Replace all `{{CONFIG:...}}` placeholders with actual user responses.

---

### 5. Create Build Directory Structure

Create the basic directory structure for this build:

```bash
# Build directory already exists (we're in it)
# Create subdirectories
mkdir -p docs/build-history
mkdir -p tests

echo "✅ Build directory structure created"
```

**Directory structure**:
```
builds/{{CONFIG:build_name}}/
├── BUILD_CONFIG.json          # Created in step 3
├── docs/
│   └── build-history/         # For step completion records
└── tests/                     # For verification scripts
```

---

### 6. Initialize BUILD_STATUS.md

Create BUILD_STATUS.md to track build progress:

```markdown
# Build Status: {{CONFIG:build_name}}

**System**: hello-world
**Started**: {{TIMESTAMP}}
**Status**: In Progress

---

## Configuration

- **Build Name**: {{CONFIG:build_name}}
- **Language**: {{CONFIG:language}}
- **Platform**: {{CONFIG:platform}}
- **Script Name**: {{CONFIG:script_name}}
- **Message**: {{CONFIG:message}}

---

## Steps Progress

- [x] Step 0: Build Configuration (COMPLETE)
- [ ] Step 1: Initialize Project Structure
- [ ] Step 2: Create Main Script
- [ ] Step 3: Set Permissions
- [ ] Step 4: Verify Implementation

---

## Build Log

### Step 0: Build Configuration
- **Started**: {{TIMESTAMP}}
- **Completed**: {{TIMESTAMP}}
- **Duration**: < 1 minute
- **Status**: ✅ PASS
- **Notes**: Configuration collected and saved
```

---

## Verification

**Verify Step 0 completion**:

```bash
# 1. BUILD_CONFIG.json exists
test -f BUILD_CONFIG.json && echo "✅ Config file exists" || echo "❌ Config file missing"

# 2. BUILD_CONFIG.json is valid JSON
python3 -m json.tool BUILD_CONFIG.json > /dev/null 2>&1 && echo "✅ Valid JSON" || echo "❌ Invalid JSON"

# 3. Required fields present
grep -q '"build_name"' BUILD_CONFIG.json && echo "✅ build_name present" || echo "❌ build_name missing"
grep -q '"language"' BUILD_CONFIG.json && echo "✅ language present" || echo "❌ language missing"
grep -q '"platform"' BUILD_CONFIG.json && echo "✅ platform present" || echo "❌ platform missing"
grep -q '"script_name"' BUILD_CONFIG.json && echo "✅ script_name present" || echo "❌ script_name missing"
grep -q '"message"' BUILD_CONFIG.json && echo "✅ message present" || echo "❌ message missing"

# 4. BUILD_STATUS.md exists
test -f BUILD_STATUS.md && echo "✅ Status file exists" || echo "❌ Status file missing"

# 5. Directory structure
test -d docs/build-history && echo "✅ docs/build-history exists" || echo "❌ Missing directory"
test -d tests && echo "✅ tests directory exists" || echo "❌ Missing directory"

echo ""
echo "✅ Step 0 verification complete"
```

**All checks must pass** before proceeding to Step 1.

---

## Completion Criteria

- [x] BUILD_CONFIG.json created with all 5 configuration items
- [x] BUILD_CONFIG.json is valid JSON
- [x] BUILD_STATUS.md created and initialized
- [x] Directory structure created (docs/build-history/, tests/)
- [x] All verification checks pass

---

## On Failure

If verification fails:
1. Check BUILD_CONFIG.json syntax
2. Ensure all required fields are present
3. Verify directory creation succeeded
4. Retry this step (up to 3 attempts)
5. If still failing: Stop and report error

---

## Next Step

**Step 1**: Initialize Project Structure (hello-step_478a8c4b0cef.md)

---

## Traceability

**Implements**:
- hello-world-spec.md § 3.1 (Build Configuration)
- hello-world-spec.md § 3.2 (Configuration File Structure)

**References**:
- YBS Framework: Configuration-First principle
- Framework docs: framework/methodology/executing-builds.md

---

## Notes for AI Agents

- **ALWAYS check for BUILD_CONFIG.json first** - don't ask questions if it exists
- **This is the ONLY step that prompts the user** - all other steps are autonomous
- **Save exact user responses** - don't modify or validate beyond basic checks
- **Create clean JSON** - proper formatting, no syntax errors
- **Update BUILD_STATUS.md** after completion

---

**Version**: 1.0.0
**Last Updated**: 2026-01-18
